---
---

<!--LogIn Form -->

<div class="container login">
    <div class="container title">
        <h1>LogIn</h1>
        <p id="main-p">Welcome back!!!</p>
        <p>Still an outsider? Create your profile 
            <button class="btn btnAccess" aria-label="log-in">
                <a href="/signup">SignUp</a>
            </button>
        </p>
    </div>
    <!--Form -->
    <div class="container form">
        <form id="login-form" action="#" method="post">
            <fieldset>
                <!--Email-->
                <label for="email">
                    Enter your email: <input required id="email" type="email" name="email" placeholder="Email" autocomplete="email">
                </label>
                <!--Password -->
                <label for="password">
                    Enter your password: <input required id="password" type="password" name="password" placeholder="Password" autocomplete="new-password">
                </label>
            </fieldset>
            
            <!--LogIn -->
            <button class="btn btnAccess" aria-label="log-in">
                LogIn
            </button>
          </form>
    </div>
</div>
---
---
<!-- Your HTML above -->

<script type="module">
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("login-form");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;

      try {
        const res = await fetch("http://localhost:3600/user/login", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ email, password }),
        });

        const data = await res.json();

        if (res.ok) {
          alert("Login successful! ðŸŽ‰");
          
          // Optionally: redirect
          window.location.href = "/mode";
        } else {
          alert(data.message || "Login failed");
        }

      } catch (err) {
        console.error("Login request error:", err);
        alert("Something went wrong. Try again.");
      }
    });
  });
</script>
